<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-12-19 Mon 20:19 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Temporary figures in org-mode</title>
<meta name="author" content="RÃ©mi Louf" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="style.css" /><script data-goatcounter="https://thetypicalset.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Temporary figures in org-mode</h1>
<dl class="org-dl">
<dt>tags</dt><dd><a href="20220105150821-workflow.html#ID-15a9ee78-16e4-4df9-b01b-60ef4cbe0a44">Workflow</a></dd>
</dl>

<p>
When I start exploring a topic I often have to plot figures that I probably won't keep. I thus don't want to have to find a name for these figures. Luckily there is a very simple solution; we can indeed use the `org-babel-temp-file` function to generate a random file location. For instance for a svg file:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(org-babel-temp-file <span style="color: #CC9393;">"figure"</span> <span style="color: #CC9393;">".svg"</span>)
</pre>
</div>

<pre class="example">
/tmp/figureHlR8fr.svg
</pre>


<p>
All we need to do is set the `filename` variable to be the result of this function in the source block header:
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">+begin_src python :session :results file :exports both :var filename=(org-babel-temp-file "figure" ".png")</span>
<span style="color: #F0DFAF; font-weight: bold;">import</span> matplotlib.pyplot <span style="color: #F0DFAF; font-weight: bold;">as</span> plt
<span style="color: #F0DFAF; font-weight: bold;">import</span> numpy <span style="color: #F0DFAF; font-weight: bold;">as</span> np

<span style="color: #DFAF8F;">x</span> = np.linspace(-10, 10, 1000)
<span style="color: #DFAF8F;">square</span> = np.square(x)

<span style="color: #DFAF8F;">fig</span>, <span style="color: #DFAF8F;">ax</span> = plt.subplots()
ax.plot(x, square, color=<span style="color: #CC9393;">'black'</span>)
ax.set_xlabel(<span style="color: #CC9393;">'x'</span>)
ax.set_ylabel(r<span style="color: #CC9393;">'$x^2$'</span>)

plt.savefig(filename)
filename
<span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">+end_src</span>
</pre>
</div>


<div id="orgb4984ce" class="figure">
<p><img src="file:///tmp/babel-6TNZFG/figure6VQW3J.png" alt="figure6VQW3J.png" />
</p>
</div>

<p>
To avoid copying the headers for every source block I add this at the top of my org file:
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #7F9F7F;">#+PROPERTY: header-args:python :session :var filename=(org-babel-temp-file "figure" ".png")</span>
</pre>
</div>

<div id="outline-container-org6335b1c" class="outline-2">
<h2 id="org6335b1c">Links to this note</h2>
</div>
</div>
</body>
</html>